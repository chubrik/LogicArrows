; ##################################################################################################
; ##        Source code for the "Terminal Art" program for a computer made of logic arrows        ##
; ##         Исходный код программы "Terminal Art" для компьютера из логических стрелочек         ##
; ##                 https://github.com/chubrik/LogicArrows/tree/main/computer-v2                 ##
; ##                         (с) 2025 Arkadi Chubrik (arkadi@chubrik.org)                         ##
; ##################################################################################################


                ldi d, terminal

; Стадия 1
                ldi c, data1
                ldi b, data1_size

loop1:          ld a, c
                st a, d
                inc c
                dec b
                jnz loop1

; Стадия 2
                ldi c, data2
                ldi b, loop2

loop2:          ld a, c
                st a, d
                inc c
                jnz b

; Стадия 3
                ldi a, 2
                st a, bank
                ldi c, data3_end
                ldi b, loop3

loop3:          ld a, c
                st a, d
                dec c
                js b

                hlt

; Данные для стадии 1
data1       db  0b10000000, 0b11000000, 0b11000000, 0b11000000, 0b10110000, 0b11111000, ; Ряд 1
                0b11111000, 0b11111110, 0b11111110, 0b11111111, 0b11111111, 0b11111111,
                0b11111111, 0b11111111, 0b11111110, 0b11111000, 0b11111100, 0b11111100,
                0b11111100, 0b11111000, 0b11110000, 0b11100000, 0b11100000, 0b11000100,
                0b00000110, 0b00000110, 0b00000110, 0b00000100
data1_size  equ $ - data1

terminal    db  0                       ; Адрес для вывода графики в терминал
out         db  0b00000001              ; Порт вывода, подключаем терминал
bank        db  0                       ; Порт банка памяти

; Данные для стадии 2
data2       db                                                  0b10000100, 0b11000100,
                0b11000000, 0b11100000, 0b11110000, 0b01111000, 0b11111100, 0b11111100,
                0b11111100, 0b11111000, 0b11111000, 0b11100000, 0b11100000, 0b11000000,
                0b11001000, 0b10001100, 0b00001110, 0b00001110, 0b11001110, 0b11001100,
                0b11101000, 0b11110000, 0b11111100, 0b11111100, 0b01111100, 0b11111100,
                0b11111000, 0b11110000, 0b11110100, 0b11111110, 0b11011111, 0b11111111,
                0b01111111, 0b11111111, 0b11111110, 0b11111100, 0b01111000, 0b01111000,
                0b11111100, 0b11111100, 0b11111100, 0b11110000, 0b11100000, 0b11000000,

                0b11110111, 0b11111111, 0b11111111, 0b11111111, 0b11111111, 0b11110111, ; Ряд 2
                0b11111111, 0b11111111, 0b11111101, 0b11011111, 0b00111111, 0b11111110,
                0b11111111, 0b10011111, 0b01110011, 0b11111111, 0b11111111, 0b11011111,
                0b11111111, 0b11111111, 0b11111111, 0b11111111, 0b11111011, 0b11111000,
                0b11111000, 0b11111000, 0b01110000, 0b00000001, 0b00000001, 0b00010001,
                0b00010001, 0b00000001, 0b00100001, 0b00110001, 0b00110001, 0b00110001,
                0b00110001, 0b00111001, 0b00111000, 0b00111000, 0b00111000, 0b00110001,
                0b00100001, 0b00100001, 0b00100001, 0b00000000, 0b00000001, 0b00000001,
                0b00000001, 0b10000001, 0b11000001, 0b01100001, 0b11100001, 0b10000001,
                0b00000001, 0b00000001, 0b00000001, 0b00100001, 0b00110001, 0b00111001,
                0b00111001, 0b00110000, 0b00100000, 0b00111000, 0b00111100, 0b00111100,
                0b00111100, 0b00111100, 0b00111000, 0b00110000, 0b00100000, 0b00000000,
                
                0b00011111, 0b00011111, 0b00011111, 0b00011111, 0b00001111, 0b00011111, ; Ряд 3
                0b00010111, 0b00111110, 0b01110001, 0b11100001, 0b11111110, 0b11111111,
                0b11000111, 0b11100001, 0b11110011, 0b01111111, 0b00111001, 0b01101110,
                0b01100111, 0b11110111, 0b01111011, 0b00111111, 0b00111111, 0b00011111,
                0b00001111, 0b10001111, 0b11000110, 0b11000000, 0b10000000, 0b00000000,
                0b00000000, 0b10000000, 0b11000000, 0b01100000, 0b00110000, 0b00011000,
                0b10001100, 0b11110110, 0b11111111, 0b11111110, 0b11111100, 0b11111000,
                0b11110000, 0b01100000, 0b00110000, 0b00111000, 0b00011000, 0b11001110,
                0b00000011, 0b10000001, 0b11101000, 0b11111110, 0b00111111, 0b11111111,
                0b11111111, 0b01111110, 0b11111110, 0b11111100, 0b11111000, 0b11110000,
                0b11111000, 0b11101100, 0b11000110, 0b10011110, 0b11111100, 0b11110000,
                0b11110000, 0b11100000, 0b11100000, 0b11000000, 0b10000000, 0b00000000,

                0b01111111, 0b11111111, 0b11111110, 0b11111110                          ; Ряд 4
                
; На стадии 3 данные выводятся от конца к началу
data3       db  0b00000101, 0b00101111, 0b01111111, 0b11111111, 0b11111111, 0b11011111,
                0b11111111, 0b11111111, 0b11111110, 0b11111111, 0b01111111, 0b11111111,
                0b11111111, 0b11111111, 0b11111110, 0b11111100, 0b11111001, 0b11111111,
                0b11111110, 0b11111001, 0b11111011, 0b11110111, 0b11111110, 0b11111100,
                0b11111001, 0b11111011, 0b11110111, 0b11111111, 0b11111110, 0b11111100,
                0b11111011, 0b11110110, 0b11111110, 0b11111100, 0b11111100, 0b11110011,
                0b11100111, 0b11101111, 0b11111111, 0b11111110, 0b11111001, 0b11111011,
                0b11110011, 0b11100110, 0b11101110, 0b11111100, 0b11111000, 0b11111000,
                0b11111000, 0b11110000, 0b11110000, 0b11100000, 0b11100000, 0b10001111,
                0b11111111, 0b11111111, 0b11111000, 0b11000000, 0b00000000, 0b11100000,
                                                                0b11110000, 0b11100000
data3_end   equ $ - 1
