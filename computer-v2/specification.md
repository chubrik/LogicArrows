# Устройство и характеристики
Компьютер состоит из процессора, оперативной памяти, устройств ввода/вывода и набора программ.
Основные характеристики:
- 8-битная архитектура, процессор с 4 регистрами и флагами.
- Оперативная память до 32 КБ с интегрированной видеопамятью и портами.
- Ввод/вывод: клавиатура, цветной дисплей, терминал и цифровой индикатор.
- Собственный язык ассемблера (см. [Программирование](programming.md)).
- Загрузка программ со специальных дискет.
<br><br><br>


## Процессор
Процессор состоит из указателя инструкции `IP`, регистра инструкции `IR`, интерпретатора, 4
свободных регистров `A` `B` `C` `D`, флагов `Z` `S` `C` `O`, многофункционального сумматора,
механизма битового сдвига и ряда других мелких механизмов.

Процессор читает инструкцию из RAM по адресу, лежащему в `IP`. Инструкция попадает в `IR`, инициируя
выполнение той или иной операции. Во время выполнения операции происходит взаимодействие с
регистрами и флагами. После этого `IP` инкрементируется и процесс повторяется. Подробнее см.
[Программирование](programming.md).

<img src="img/cpu.jpg" width="60%" alt="Процессор">
<br><br>


## Оперативная память
Памятью компьютера является RAM объёмом 1 КБ. Поддерживается расширение вплоть до 32 КБ. Единицей
хранимой информации является 1 байт, адрес доступа к памяти также представляет собой 1 байт.

Т. к. 8-битный адрес может обеспечить доступ лишь по 256 адресам RAM, существует система
переключения банков через порт `3F`. Если в этот порт записать число, диапазон адресов `80...FF`
переключится на банк соответствующего номера. Число `0` как исключение ссылается на банк № 1. Номер
банка не может быть предзаписан на дискете, а управляется только во время выполнения программы.

<img src="img/ram.jpg" width="80%" alt="Оперативная память">
<br><br>


## Клавиатура
Полноформатная клавиатура, приближенная к реальному ПК, с крупными кнопками и подробными подписями.
Имеет латинскую и кириллическую раскладки, однократный и постоянный верхний регистр. Текущий режим
клавиатуры отображается непосредственно на кнопках переключения раскладки и регистра.

После нажатия на любую клавишу, её код может быть прочитан программой из порта `3E`. После чтения
порт автоматически обнуляется для возможности определения повторных нажатий. Коды символов
соответствуют кодировке [`cp1251`](https://ru.wikipedia.org/wiki/Windows-1251). Клавишам `←` `↑` `→`
`↓` `Enter` соответствуют коды `11` `12` `13` `14` `0A`.

<img src="img/keyboard.jpg" width="80%" alt="Клавиатура">
<br><br>


## Дисплей
Для подключения вывода на дисплей необходимо в порт `3E` записать байт, у которого 3 и 2-й биты
равны `01` для монохромного режима и `11` для цветного. В монохромном режиме дисплей использует
диапазон памяти `40...5F`, в цветном `40...7F`. Ниже показано соответствие адресов различным
участкам дисплея. Отправка данных по этим адресам приводит к появлению на дисплее соответствующих
пикселей.

<img src="img/display.jpg" width="60%" alt="Дисплей">
<br><br>


## Терминал
Размер терминала 12×4 символов с возможностью расширения до любых размеров. Имеет подвижный курсор в
нижней строке, где можно выводить различные символы и графику. Остальные строки являются историей и
постепенно сдвигаются вверх. Поддерживает команды `\a`, `\b`, `\t`, `\n`, `\v`, `\f`, `\r`, `delete`
и перемещение курсора стрелками.

Для подключения вывода в терминал необходимо в порт `3E` записать байт, у которого 0-й бит равен
`1`. Далее, каждый байт, отправленный по адресу `3C`, выводится в терминал как символ в кодировке
[`cp1251`](https://ru.wikipedia.org/wiki/Windows-1251). Шесть байт, отправленных по адресу `3D`,
выводятся в терминал как один графический символ.

<img src="img/terminal.jpg" width="60%" alt="Терминал">
<br><br>


## Цифровой индикатор
Состоит из 5 десятичных цифр и отображает числа в диапазоне `0...65535`. Для подключения вывода на
цифровой индикатор необходимо в порт `3E` записать байт, у которого 1-й бит равен `1`. Далее, каждый
байт, отправленный по адресу `3A`, преобразуется в десятичный формат и выводится на цифровой
индикатор. Байт, отправленный по адресу `3B`, преобразуется в десятичный формат с умножением на
256 *(в разработке).*
