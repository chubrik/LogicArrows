### [← Компьютер из стрелочек *<sup>(старый)</sup>*](README.md)

# Характеристики и устройство
<br>

Компьютер состоит из процессора, оперативной памяти, устройсв ввода/вывода и набора программ. Характеристики:
- 8-битная архитектура, процессор с 4 регистрами и флагами
- 256 байт RAM с интегрированной видеопамятью и портами
- Собственный язык ассемблера (см. [Программирование](programming.md))
- Возможность подключать множество средств ввода и вывода и программно переключаться между ними
- Возможность загружать в RAM разный исполняемый код со специальных дискет
<br><br><br>


## Процессор
Процессор состоит из двух частей: управляющей и вычислительной (ALU). Управляющая часть состоит из указателя операции `IP`, регистра операции `IR`, блока управления и 4 свободных регистров `A` `B` `C` `D`. Вычислительная часть состоит из регистра операции `IR`, 4 флагов `Z` `C` `S` `O`, блока управления и исполняющих механизмов, включающих многофункциональный сумматор.

Процессор читает команду из RAM по адресу, лежащему в `IP`, после чего `IP` инкрементируется. Прочитанная команда попадает в `IR`, и блоки управления инициируют ту или иную операцию. Некоторые команды требуют дополнительного аргумента, который читается из RAM по адресу, следующему за командой. Команды активно работают с регистрами `A` `B` `C` `D`, подготавливая данные для ALU.

Типичная операция ALU читает информацию из двух регистров, производит между ними вычисление и сохраняет результат в один из этих же регистров. Также, в зависимости от типа вычисления ALU выставляет или сбрасывает те или иные флаги. Эти флаги впоследствии могут быть использованы программой в качестве условия для принятия решений.

Подробнее см. [Программирование](programming.md).

![Процессор](img/cpu.jpg)
<br><br><br>


## Оперативная память
Единственной памятью компьютера является RAM на 256 байт. Единицей хранимой информации является 1 байт, адрес доступа к памяти также представляет собой 1 байт.

Адрес `3E` подключён к системе ввода. По этому адресу всегда можно прочитать актуальную информацию, например, о нажатой клавише на клавиатуре.

Адрес `3F` подключён к управлению выводом. К примеру, если записать по этому адресу байт `80`, то вывод переключится на дисплей.

Адреса `40...7F` являются совмещённой видеопамятью. Запись по этим адресам может параллельно воздействовать на текущее средство вывода, в зависимости от его типа.

![Оперативная память](img/ram.jpg)
<br><br><br>


## Система ввода
Представлена клавиатурой, где у каждой клавиши есть уникальный код. При нажатии на любую клавишу, её код попадает в RAM по адресу `3E`, откуда он в любой момент может быть прочитан программой. Если необходимо определить повторное нажатие на одну и ту же клавишу, то после определения первого нажатия программе следует самостоятельно в RAM сбросить значение адреса `3E`.
<br><br><br>


## Система вывода

### Дисплей
Для переключения вывода на дисплей необходимо в RAM по адресу `3F` записать байт `80`. Ниже показано адресное пространство дисплея. Запись в RAM по адресу из этого пространства будет приводить к появлению на дисплее пикселей, соответствующих записанным битам.

![Дисплей](img/display.jpg)
<br><br>

### Терминал
Для переключения вывода на терминал необходимо в RAM по адресу `3F` записать байт `40`. Далее, каждый байт, записанный в RAM по адресу `40`, будет выводиться на терминал в виде символа в кодировке [cp1251](https://ru.wikipedia.org/wiki/Windows-1251), сдигая все предыдущие символы влево.

![Терминал](img/terminal.jpg)
