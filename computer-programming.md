### [← Компьютер из стрелочек](./computer.md)

# Программирование

## Общие принципы
Для программирования используются команды ассемблера, которые располагаются в RAM и выполняются друг за другом, начиная с адреса `00`. Каждая команда занимает 1 байт. Некоторые команды требуют дополнительного аргумента, который также занимает 1 байт и располагается в RAM сразу вслед за командой. Команды работают с регистрами процессора `A` `B` `C` `D` и флагами `Z` `C` `S` `O`. Также, команды могут совершать переходы к различным участкам кода, создавая циклы, прыжки и пр.

Регистры `A` `B` `C` `D` хранят по 1 байту каждый и имеют универсальное назначение. Флаги `Z` `C` `S` `O` выражают собой результат выполнения операций вычисления, а также могут влиять на ход других операций, в т. ч. быть условием для перехода к другому участку кода.
- **Флаг Z (ноль)** выставляется, если результат операции вычисления равен нулю.
- **Флаг C (перенос)** выставляется, если в результате операции вычисления один из битов вышел за пределы байта.
- **Флаг S (знак)** выставляется, если у результата операции вычисления старший бит равен 1. (В математике с отрицательным числами это означает, что результат меньше нуля.)
- **Флаг O (переполнение)** выставляется, если два операнда операции вычисления имели одинаковый старший бит, а у результата этот бит имеет противоположное значение. (В математике с отрицательными числами это означает, что результат вышел за допустимый диапазон и считается ошибочным.)
<br><br>

## Команды ассемблера
![Команды ассемблера](img/computer-assembly.png)

Каждая команда имеет свой HEX-код, который можно узнать из таблицы выше. К примеру, команда `st a, b` имеет код `B4` (ряд, затем колонка). Ниже идёт описание каждой команды. В нём используются условные обозначения X и Y, которые означают любой из регистров `A` `B` `C` `D`, в зависимости от конкретной команды из таблицы выше.
<br><br>

### Команды вычисления
Команды из этого набора читают информацию из одного или двух регистров, производят вычисление и сохраняют результат в один из этих же регистров. Также, в зависимости от типа операции, они могут воздействовать на те или иные флаги.

Команда|Описание|На какие флаги воздействует
---|---|---
mov X, Y|Копирует из Y в X.<br>Если в качестве Y указан 0, то в X записывается 0.|не воздействует
and X, Y|Бинарная операция AND между X и Y, результат сохраняется в X.<br>Если в качестве Y указан 0, то ничего не делает, а лишь воздействует на флаги.|Z и S
or X, Y|Бинарная операция OR между X и Y, результат сохраняется в X.<br>Если в качестве Y указан 0, то ничего не делает, а лишь воздействует на флаги.|Z и S
xor X, Y|Бинарная операция XOR между X и Y, результат сохраняется в X.<br>Если в качестве Y указан 0, то ничего не делает, а лишь воздействует на флаги.|Z и S
add X, Y|Сложение X и Y, результат сохраняется в X.<br>Если в качестве Y указан 0, то ничего не делает, а лишь воздействует на флаги.|все флаги
adc X, Y|То же, что и предыдущее, но если ранее был установлен флаг `C`, к результату дополнительно прибавляется 1.|все флаги
sub X, Y|Вычитание Y из X, результат сохраняется в X.<br>Если в качестве Y указан 0, то ничего не делает, а лишь воздействует на флаги.|все флаги
sbb X, Y|То же, что и предыдущее, но если ранее был установлен флаг `C`, из результата дополнительно вычитается 1.|все флаги
not X|Заменяет каждый бит на противоположный.|Z и S
neg X|Меняет знак у числа. (Число необходимо воспринимать как знаковое.)|Z и S
inc X|Прибавляет 1.|Z и S
dec X|Отнимает 1.|Z и S
shl X|Сдвигает все биты на один влево. Левый бит переходит во флаг `С`. Правый бит становится нулём.|Z, C и S
shr X|Сдвигает все биты на один вправо. Левый бит становится нулём. Правый бит переходит во флаг `С`.|Z, C и S
sar X|То же, что и предыдущее, но левый бит не меняет своего значения.|Z, C и S
exp X|Флаг `С` копируется в каждый бит числа.|Z и S
rcl X|Сдвигает все биты на один влево. Правый бит переходит из флага `С`. Левый бит переходит во флаг `С`.|Z, C и S
rcr X|Сдвигает все биты на один вправо. Левый бит переходит из флага `С`. Правый бит переходит во флаг `С`.|Z, C и S

<br>

### Команды управления
*Описание в разработке*
